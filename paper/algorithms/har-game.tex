\begin{algorithm}
    \caption{\label{alg:game-storage}\textsf{best array} using storage}
    \begin{algorithmic}[1]

    \Contract{best-array}
        \State{$\textsf{best} \gets \emptyset$;
               $\textsf{holder} \gets \emptyset$}
        \Function{\sf submit}{$a$}
        \State \textsf{best} $\gets a$
            \Comment{array saved in storage}
            \State \textsf{holder $\gets$ msg.sender}
        \EndFunction

        \Function{\sf contest}{$a$}
            \State \textsf{require}(\textsf{compare}($a$))
            \State \textsf{holder} $\gets$ \textsf{msg.sender}
        \EndFunction

        \Function{\sf compare}{$a$}
            \State \textsf{require}($|a|$ $\geq$ $|$\textsf{best}$|$)
            \For{$i$ \textbf{in} $|$\textsf{best}$|$}
            \State \textsf{require}($a[i]$ $\geq$ \textsf{best}[i])
            \EndFor
            \State \Return{true}
        \EndFunction
        \EndContract
        \vskip8pt
    \end{algorithmic}
\end{algorithm}

\begin{algorithm}
    \caption{\label{alg:game-memory}\textsf{best array} using hash-and-resubmit pattern}
    \begin{algorithmic}[1]
        \Contract{best-array}
        \State{$\textsf{hash} \gets \emptyset$;
               $\textsf{holder} \gets \emptyset$}

        \Function{\sf submit}{$\arra$}
        \State $\textsf{hash} \gets \textsf{H}(\arra)$
            \Comment{hash saved in storage}
            \State \textsf{holder} $\gets$ \textsf{msg.sender}
        \EndFunction

    \Function{\sf contest}{$\arra^*$, $\arrb$}
    \State \textsf{require}(\textsf{hash256}($\arra^*$) $=$ $hash$)
        \Comment{validate $\arra^*$}
        \State \textsf{require}(\textsf{compare}($\arra^*$, $\arrb$))
        \State \textsf{holder} $\gets$ \textsf{msg.sender}
    \EndFunction
    \Function{\sf compare}{$\arra^*$, $\arrb$}
        \State \textsf{require}($|\arra^*|$ $\geq$ $|\arrb|$)
        \For{$i$ \textbf{in} $|\arra^*|$}
            \State \textsf{require}($\arra^*[i] \geq \arrb[i]$)
        \EndFor
    \EndFunction
    \State \Return{true}
    \EndContract
    \vskip8pt
    \end{algorithmic}
\end{algorithm}
