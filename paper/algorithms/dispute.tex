\renewcommand{\genesis}{\textsf{G}}

\begin{algorithm}

    \label{alg:dispute}
    \caption{The \textsf{NIPoPoW} client using dispute phase}

    \begin{algorithmic}[1]

    \Contract{crosschain}
    \State $\textsf{events} \gets \bot;$ $\genesis \gets \bot$
    \Function{\sf initialize}{$\genesis_{remote}$}
        \State \genesis $\gets \genesis_{remote}$
    \EndFunction
    \Function{\sf submit}{$\pis$, $e$}
        \State \textsf{require}($\pis$[0] = $\genesis$)
        \State \textsf{require}($\textsf{events$[e]$} = \bot$)
        \State \textsf{events$[e]$.hash} $\gets$ \textsf{H}($\pis$)
        \State \textsf{events$[e]$.pred} $\gets$
        \textsf{evaluate-predicate}(\textsf{$\pis$}, $e$)
    \EndFunction
    \Function{\sf dispute}{$\pisa$, $e$, $index$}
        \State \textsf{require}(\textsf{events}$[e]$ $\ne$ $\bot$)
        \State \textsf{require}(\textsf{events$[e]$.hash} $=$ \textsf{H}($\pisa$))
        \State \textsf{require}($\neg \textsf{valid-block}(\pis, index)$)
        \State \textsf{events$[e]$} $\gets$ $\bot$
    \EndFunction
    \Function{\sf valid-block}{$\pi$, $i$}
        \If{\textsf{H}($\pi$[$i$].ilink) $\neq$
        $\pi$[$i+1$].prev-ilink-hash}
        \State \Return true
        \EndIf
        \State \Return false
    \EndFunction
    \EndContract
    \vskip8pt
    \end{algorithmic}
\end{algorithm}

